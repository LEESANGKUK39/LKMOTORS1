
<!DOCTYPE html>
<html lang="ko">
<head>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>    
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mercedes-Benz Truck Service Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #0a0a0a; color: #e5e5e5; }
        .benz-gradient { background: linear-gradient(135deg, #1a1a1a 0%, #000000 100%); }
        .step-active { color: #3b82f6; font-weight: bold; transform: scale(1.1); transition: all 0.3s; }
        .progress-bar { transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
        .glass-card { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8">
        
        <section class="benz-gradient p-8 rounded-3xl border border-gray-800 shadow-2xl relative overflow-hidden">
            <div class="flex justify-between items-center mb-10">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Mercedes-Benz_Logo_2010.svg/1024px-Mercedes-Benz_Logo_2010.svg.png" alt="Benz" class="w-10 h-10 invert">
                <div class="text-right">
                    <p class="text-gray-500 text-xs tracking-widest uppercase">Maintenance Status</p>
                    <p class="text-xl font-bold text-white">서울 88 가 1234 <span class="text-blue-500 text-sm ml-2">Actros</span></p>
                </div>
            </div>

            <h2 class="text-2xl font-bold mb-10 text-center text-white">실시간 정비 진행 현황</h2>

            <div class="relative pt-1 px-2">
                <div class="flex mb-4 items-center justify-between">
                    <span id="status-label" class="py-1 px-4 rounded-full bg-blue-600 text-white text-xs font-bold uppercase tracking-wider">입고 확인</span>
                    <span id="percent-label" class="text-blue-400 font-bold text-lg">25%</span>
                </div>
                <div class="overflow-hidden h-2 mb-12 text-xs flex rounded-full bg-gray-800">
                    <div id="progress-line" style="width:25%" class="progress-bar shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500"></div>
                </div>
            </div>

            <div class="grid grid-cols-4 gap-2 text-center text-[10px] uppercase tracking-tighter">
                <div id="step1" class="step-active"><i class="fas fa-truck-loading text-3xl mb-3"></i><br>입고</div>
                <div id="step2" class="text-gray-600"><i class="fas fa-microchip text-3xl mb-3"></i><br>진단</div>
                <div id="step3" class="text-gray-600"><i class="fas fa-tools text-3xl mb-3"></i><br>수리중</div>
                <div id="step4" class="text-gray-600"><i class="fas fa-flag-checkered text-3xl mb-3"></i><br>완료</div>
            </div>

            <div class="mt-12 p-6 glass-card rounded-2xl border-l-4 border-blue-600">
                <div class="flex items-center mb-2">
                    <i class="fas fa-comment-dots text-blue-500 mr-2"></i>
                    <p class="text-gray-400 text-xs font-bold uppercase tracking-widest">Mechanic Comment</p>
                </div>
                <p id="mechanic-msg" class="text-sm leading-relaxed text-gray-200">차량이 정비소에 안전하게 입고되었습니다. 곧 정밀 진단을 시작합니다.</p>
            </div>
        </section>

        <section class="bg-white p-8 rounded-3xl text-gray-900 shadow-2xl border border-gray-200">
            <h2 class="text-2xl font-bold mb-8 flex items-center border-b pb-4">
                <i class="fas fa-user-shield mr-3 text-blue-600"></i> 관리자 컨트롤 패널
            </h2>
            
            <div class="space-y-8">
                <div>
                    <p class="font-bold mb-4 text-sm text-gray-500 uppercase tracking-wider">정비 단계 업데이트</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="updateStatus(1)" class="py-4 bg-gray-100 font-bold rounded-xl hover:bg-gray-200 transition active:scale-95 shadow-sm">1. 입고 확인</button>
                        <button onclick="updateStatus(2)" class="py-4 bg-gray-100 font-bold rounded-xl hover:bg-gray-200 transition active:scale-95 shadow-sm">2. 정밀 진단</button>
                        <button onclick="updateStatus(3)" class="py-4 bg-gray-100 font-bold rounded-xl hover:bg-gray-200 transition active:scale-95 shadow-sm">3. 수리 진행</button>
                        <button onclick="updateStatus(4)" class="py-4 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition active:scale-95 shadow-lg shadow-blue-200">4. 최종 완료</button>
                    </div>
                </div>

                <div>
                    <label class="block font-bold mb-3 text-sm text-gray-500 uppercase tracking-wider">차주에게 메시지 전송</label>
                    <textarea id="admin-input" class="w-full p-4 border-2 border-gray-100 rounded-2xl focus:border-blue-500 focus:ring-0 outline-none transition text-sm" rows="4" placeholder="기사님께 전달할 상세 내용을 입력하세요."></textarea>
                    <button onclick="sendMsg()" class="mt-4 w-full py-4 bg-gray-900 text-white font-bold rounded-xl hover:bg-black transition flex items-center justify-center">
                        <i class="fas fa-paper-plane mr-2"></i> 메시지 실시간 업데이트
                    </button>
                </div>
            </div>
        </section>

    </div>

    <script>
        function updateStatus(step) {
            const progress = document.getElementById('progress-line');
            const label = document.getElementById('status-label');
            const percent = document.getElementById('percent-label');
            const msg = document.getElementById('mechanic-msg');

            // UI 상태 초기화
            for(let i=1; i<=4; i++) {
                document.getElementById('step'+i).className = 'text-gray-600';
            }

            // 기획안 기반 상태별 로직
            const steps = {
                1: { w: '25%', l: '입고 확인', p: '25%', m: '차량이 입고되었습니다. 등록 절차를 진행 중입니다.' },
                2: { w: '50%', l: '정밀 진단', p: '50%', m: '첨단 스캐너를 연결하여 시스템 오류를 진단하고 있습니다.' },
                3: { w: '75%', l: '정비 진행 중', p: '75%', m: '정품 부품을 사용하여 수리 작업을 진행하고 있습니다.' },
                4: { w: '100%', l: '정비 완료', p: '100%', m: '모든 점검이 완료되었습니다. 즉시 출고 가능합니다!' }
            };

            const s = steps[step];
            progress.style.width = s.w;
            label.innerText = s.l;
            percent.innerText = s.p;
            msg.innerText = s.m;
            document.getElementById('step'+step).className = 'step-active';
        }

        function sendMsg() {
            const input = document.getElementById('admin-input');
            const display = document.getElementById('mechanic-msg');
            if(input.value.trim()) {
                display.innerText = input.value;
                input.value = '';
                alert('알림: 차주 화면에 메시지가 성공적으로 전달되었습니다.');
            }
        }
    </script>
</body>
</html>
